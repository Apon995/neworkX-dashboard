"use client";
import { useEffect, useRef, useState } from "react";

interface ModalProps {
    onClose: () => void;
}


export const ManageIcon = () => (
    <svg width="48"
        height="48"
        viewBox="0 0 24 24"
        fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 11.3848C9.17533 11.3848 8.469 11.0908 7.881 10.5028C7.293 9.91477 6.99933 9.20877 7 8.38477C7.00067 7.56077 7.29433 6.8541 7.881 6.26477C8.46767 5.67544 9.174 5.38244 10 5.38577C10.826 5.3891 11.5323 5.68244 12.119 6.26577C12.7057 6.8491 12.9993 7.55577 13 8.38577C13.0007 9.21577 12.707 9.92177 12.119 10.5038C11.531 11.0858 10.8247 11.3788 10 11.3848ZM3 17.5778V16.9698C3 16.5098 3.11933 16.1118 3.358 15.7758C3.59667 15.4398 3.921 15.1661 4.331 14.9548C5.169 14.5228 6.03967 14.1918 6.943 13.9618C7.84567 13.7318 8.77033 13.6168 9.717 13.6168H10.006C10.1473 13.6168 10.266 13.6661 10.362 13.7648C10.458 13.8634 10.506 13.9834 10.506 14.1248C10.506 14.2661 10.458 14.3841 10.362 14.4788C10.266 14.5734 10.1473 14.6211 10.006 14.6218H9.717C8.84633 14.6218 8.003 14.7224 7.187 14.9238C6.37033 15.1251 5.577 15.4341 4.807 15.8508C4.58967 15.9728 4.401 16.1281 4.241 16.3168C4.08033 16.5048 4 16.7224 4 16.9698V17.6158H10.006C10.1473 17.6158 10.266 17.6638 10.362 17.7598C10.458 17.8558 10.506 17.9748 10.506 18.1168C10.506 18.2588 10.458 18.3774 10.362 18.4728C10.266 18.5681 10.1473 18.6161 10.006 18.6168H4.039C3.745 18.6168 3.49833 18.5168 3.299 18.3168C3.09967 18.1168 3 17.8711 3 17.5778ZM16.158 18.7388L16.065 17.9418C15.7883 17.8844 15.5273 17.7874 15.282 17.6508C15.0367 17.5141 14.8157 17.3408 14.619 17.1308L13.856 17.4518C13.7547 17.4924 13.66 17.4941 13.572 17.4568C13.484 17.4194 13.4153 17.3594 13.366 17.2768L13.3 17.1568C13.2473 17.0728 13.2283 16.9794 13.243 16.8768C13.2577 16.7741 13.3047 16.6901 13.384 16.6248L14.031 16.1498C13.9203 15.8651 13.865 15.5718 13.865 15.2698C13.865 14.9678 13.9203 14.6738 14.031 14.3878L13.404 13.8748C13.3233 13.8148 13.2727 13.7361 13.252 13.6388C13.232 13.5421 13.248 13.4514 13.3 13.3668L13.371 13.2418C13.4243 13.1591 13.4963 13.0991 13.587 13.0618C13.6777 13.0244 13.7737 13.0261 13.875 13.0668L14.619 13.3888C14.8023 13.1781 15.02 13.0078 15.272 12.8778C15.524 12.7478 15.7887 12.6538 16.066 12.5958L16.158 11.7938C16.1693 11.6884 16.2143 11.6034 16.293 11.5388C16.3717 11.4741 16.4637 11.4418 16.569 11.4418H16.7C16.8053 11.4418 16.8973 11.4751 16.976 11.5418C17.0547 11.6084 17.1 11.6944 17.112 11.7998L17.185 12.5958C17.4617 12.6538 17.726 12.7488 17.978 12.8808C18.23 13.0128 18.4477 13.1858 18.631 13.3998L19.364 13.0788C19.4687 13.0341 19.5653 13.0308 19.654 13.0688C19.7427 13.1074 19.8127 13.1661 19.864 13.2448L19.952 13.3818C20.0033 13.4604 20.0187 13.5491 19.998 13.6478C19.978 13.7464 19.9273 13.8261 19.846 13.8868L19.219 14.3998C19.3297 14.6811 19.385 14.9738 19.385 15.2778C19.385 15.5818 19.3297 15.8724 19.219 16.1498L19.866 16.6248C19.946 16.6848 19.9933 16.7664 20.008 16.8698C20.0213 16.9731 20.002 17.0671 19.95 17.1518L19.879 17.2768C19.829 17.3594 19.761 17.4194 19.675 17.4568C19.589 17.4948 19.4957 17.4931 19.395 17.4518L18.631 17.1308C18.435 17.3408 18.214 17.5141 17.968 17.6508C17.722 17.7874 17.461 17.8844 17.185 17.9418L17.112 18.7438C17.1 18.8491 17.0547 18.9341 16.976 18.9988C16.8973 19.0634 16.8053 19.0958 16.7 19.0958H16.57C16.464 19.0958 16.3717 19.0624 16.293 18.9958C16.2143 18.9291 16.1693 18.8434 16.158 18.7388ZM16.617 17.0768C17.115 17.0768 17.5403 16.8994 17.893 16.5448C18.2457 16.1901 18.4223 15.7641 18.423 15.2668C18.4237 14.7694 18.2467 14.3441 17.892 13.9908C17.5373 13.6374 17.1113 13.4608 16.614 13.4608C16.116 13.4608 15.6903 13.6381 15.337 13.9928C14.9837 14.3474 14.807 14.7734 14.807 15.2708C14.807 15.7681 14.9843 16.1934 15.339 16.5468C15.6937 16.9001 16.1197 17.0768 16.617 17.0768ZM10 10.3838C10.55 10.3838 11.021 10.1881 11.413 9.79677C11.805 9.40544 12.0007 8.93477 12 8.38477C11.9993 7.83477 11.8037 7.36377 11.413 6.97177C11.0223 6.57977 10.5513 6.3841 10 6.38477C9.44867 6.38544 8.978 6.5811 8.588 6.97177C8.198 7.36244 8.002 7.83344 8 8.38477C7.998 8.9361 8.194 9.40677 8.588 9.79677C8.982 10.1868 9.45267 10.3828 10 10.3848" fill="black" />
    </svg>

)

export default function ManageApplicantModal({ onClose }: ModalProps) {

    const [action, setAction] = useState("Shortlist");
    const modalRef = useRef<HTMLDivElement | null>(null);

    useEffect(() => {

        function handleClickOutside(e: MouseEvent) {
            if (modalRef.current && !modalRef.current.contains(e.target as Node)) {
                onClose();
            }
        }

        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
    }, [onClose]);

    return (
        <div className="fixed inset-0 flex items-center justify-center bg-black/40 px-4 z-50">
            <div ref={modalRef} className="bg-white rounded-xl shadow-xl w-full xl:max-w-xl max-w-md p-6">
                <div className="flex items-start space-x-3 mb-4">

                    <ManageIcon />

                    <div>
                        <h2 className="lg:text-xl text-base font-semibold text-black ">
                            Manage Applicant
                        </h2>
                        <p className="text-black font-normal lg:text-sm text-xs leading-relaxed">
                            Choose an action to update this applicantâ€™s status or schedule
                            next steps.
                        </p>
                    </div>
                </div>

                <div className="mb-6">
                    <select
                        value={action}
                        onChange={(e) => setAction(e.target.value)}
                        className="w-full border border-auth-form-border outline-none rounded-lg py-3 px-4 text-black font-normal "
                    >
                        <option>Shortlist</option>
                        <option>Reject</option>
                        <option>Schedule Interview</option>
                        <option>Move to Next Round</option>
                    </select>
                </div>

                <div className="flex justify-end">
                    <button
                        onClick={onClose}
                        className="bg-black text-white px-6 py-2 rounded-lg font-medium transition hover:cursor-pointer"
                    >
                        Done
                    </button>
                </div>
            </div>
        </div>
    );
}
